webpackJsonp([1],{290:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(514),o=n.n(r);for(var u in r)"default"!==u&&function(t){n.d(e,t,function(){return r[t]})}(u);var i=n(867),s=n.n(i),a=n(4),c=a(o.a,s.a,!1,null,null,null);c.options.__file="src/views/sys/role/edit.vue",e.default=c.exports},310:function(t,e,n){"use strict";function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z;return K.default.post("/role/tree",t)}function o(){return K.default.post("/sys/menu/types")}function u(){return K.default.post("/menu/select/parent")}function i(t){var e="";return e=t?"/menu/tree/"+t:"/menu/tree",K.default.post(e)}function s(t){return K.default.post("/merchant/autocomplete",t)}function a(t){return K.default.post("/sys/customer/manager/autocomplete",t)}function c(t){return K.default.post("/agent/manager/autocomplete",t)}function f(t){return K.default.post("/agent/parent/list",t)}function l(t){return K.default.post("/meta/states/merchant",t)}function d(t){return K.default.post("/meta/types/business",t)}function p(t){return K.default.post("/meta/types/merchant",t)}function m(t){return K.default.post("/meta/mcc/list/"+t)}function h(){return K.default.post("/meta/types/certificate")}function v(t){return K.default.post("/meta/states/merchant/audit")}function g(t){return K.default.post("/meta/states/merchant",t)}function _(t){return K.default.post("/merchant/store/list",t)}function y(t){return K.default.post("/merchant/store/autocomplete",t)}function S(t){return K.default.post("/merchant/store/autocomplete",t)}function I(t){return K.default.post("/meta/types/agent",t)}function b(t){return K.default.post("/meta/bank/info/list",t)}function M(t){return K.default.post("/meta/states/agent/audit",t)}function k(t){return K.default.post("/meta/institution/product/all")}function x(t){return K.default.post("/meta/states/charge",t)}function L(t){return K.default.post("/meta/states/refund/type",t)}function w(t){return K.default.post("/meta/types/checking/batch",t)}function C(t){return K.default.post("/meta/states/checking/batch",t)}function T(t){return K.default.post("/meta/types/product",t)}function F(t){return K.default.post("/meta/states/charge",t)}function A(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return K.default.post("/meta/institution/list",t)}function E(t){return K.default.post("/meta/institution/product/list",t)}function O(t){return K.default.post("/merchant/autocomplete",t)}function $(t){return K.default.post("/merchant/store/autocomplete",t)}function R(t){return K.default.post("/merchant/store/operator/autocomplete",t)}function P(t){return K.default.post("/transaction/unify/create/qrcode",t)}function N(t){return K.default.post("/transaction/unify/save/qrcode",t)}function D(t){return K.default.post("/transaction/unify/list/qrcode",t)}function q(t){return K.default.post("/transaction/unify/delete/qrcode/"+t)}function j(t){return K.default.post("/merchant/device/query/StoreDevices",t)}function z(t){return K.default.post("/settle/transaction/export/task/list",t)}function B(){return K.default.post("/zb/admin/clear/institution/list")}function J(){return K.default.post("/meta/types/wallet/sub/account/type")}function Q(){return K.default.post("/meta/states/account/checking/file")}function G(t){return K.default.post("/zb/admin/account/auto/complete",t)}function U(t){return K.default.post("/zb/admin/agent/auto/complete",t)}Object.defineProperty(e,"__esModule",{value:!0}),e.getSysRoles=r,e.getSysMenuTypes=o,e.getSysMenuSelect=u,e.getSysMenuTree=i,e.getMechantSelectList=s,e.getCustomerManagerSelectList=a,e.getAgentManagerSelectList=c,e.getAgentSelectList=f,e.getMechantStatesSelectList=l,e.getBusinessTypesSelectList=d,e.getMerchantTypesSelectList=p,e.getBusinessCategorySelectList=m,e.getCertificateTypes=h,e.getMerchantAuditStates=v,e.getMerchantStatesList=g,e.getMerchantStoreSelectList=_,e.getCashierMerchantStoreList=y,e.getManagerMerchantStoreList=S,e.getAgentTypesList=I,e.getBankInfoList=b,e.getAgentAuditStatesList=M,e.getPayChannels=k,e.getOrderChargeStatus=x,e.getStatesRefundType=L,e.getCheckingBatchTypes=w,e.getCheckingBatchStates=C,e.getPayTypesList=T,e.getSettleStatesList=F,e.getInstitutionList=A,e.getInstitutionProductList=E,e.getMerchantListSelect=O,e.getStoreListSelect=$,e.getStoreOperatorListSelect=R,e.createQrcodeUrl=P,e.saveQrcodeRecord=N,e.getQrcodeRecordList=D,e.deleteQrcodeById=q,e.getPrinterList=j,e.getOrderTaskList=z,e.getInstitution=B,e.getWalletAccountType=J,e.getCheckingFile=Q,e.getAccountAutoComplete=G,e.getZbAdminAgenComplete=U;var W=n(66),K=function(t){return t&&t.__esModule?t:{default:t}}(W),Z={limit:9999,offset:0}},353:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(403),u=r(o),i=n(117),s=r(i),a=n(310);e.default={name:"menu-tree-selector",props:{roleId:{type:[String,Number],default:""},menuIds:{type:Array,default:function(){return[]}},functionIds:{type:Array,default:function(){return[]}},disabled:!1},data:function(){return{data:[],currentMenuIds:[],currentFunctionIds:[]}},created:function(){this.init()},methods:{init:function(){var t=this;this.roleId&&(0,a.getSysMenuTree)(this.roleId).then(function(e){t.currentMenuIds=e.data,console.log("role",e.data)}),(0,a.getSysMenuTree)().then(function(e){t.data=e.data,t.formatTreeData(e.data)})},handleCheck:function(t){this.formatSelectData(t)},formatSelectData:function(t){var e=[],n=[];t&&t.forEach(function(t){"0"===t.parentId&&(e.push(t.id),t.childrens.forEach(function(t){"1"===t.types&&e.push(t.id),"2"===t.types&&n.push(t.id)})),"2"===t.types&&n.push(t.id)}),this.currentMenuIds=(0,s.default)(new u.default(e)),this.currentFunctionIds=(0,s.default)(new u.default(n))},formatTreeData:function(t){var e=this;t&&t.forEach(function(t){t.title=t.menuName,t.children=t.childrens,t.disabled=1===t.status,e.currentMenuIds.length&&e.currentMenuIds.forEach(function(e){"0"==t.parentId&&t.id==e.id?t.checked=!0:t.checked=e.id==t.id,console.log("v1",t.id,"vv",e.id)}),console.log("v1",t.checked,"name",t.menuName),t.expand=!0,e.formatTreeData(t.childrens)})}},watch:{currentMenuIds:function(t){this.$emit("update:menuIds",t)},currentFunctionIds:function(t){this.$emit("update:functionIds",t)},roleId:function(t){this.init()},"$props.menuIds":function(t){this.currentMenuIds=t},"$props.functionIds":function(t){this.currentFunctionIds=t}}}},354:function(t,e,n){var r=n(12);t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},402:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(353),o=n.n(r);for(var u in r)"default"!==u&&function(t){n.d(e,t,function(){return r[t]})}(u);var i=n(418),s=n.n(i),a=n(4),c=a(o.a,s.a,!1,null,null,null);c.options.__file="src/views/my-components/menu-tree-selector/index.vue",e.default=c.exports},403:function(t,e,n){t.exports={default:n(404),__esModule:!0}},404:function(t,e,n){n(71),n(28),n(42),n(405),n(411),n(414),n(416),t.exports=n(0).Set},405:function(t,e,n){"use strict";var r=n(406),o=n(354);t.exports=n(407)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(o(this,"Set"),t=0===t?0:t,t)}},r)},406:function(t,e,n){"use strict";var r=n(10).f,o=n(68),u=n(116),i=n(23),s=n(115),a=n(113),c=n(67),f=n(118),l=n(120),d=n(13),p=n(114).fastKey,m=n(354),h=d?"_s":"size",v=function(t,e){var n,r=p(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,c){var f=t(function(t,r){s(t,f,e,"_i"),t._t=e,t._i=o(null),t._f=void 0,t._l=void 0,t[h]=0,void 0!=r&&a(r,n,t[c],t)});return u(f.prototype,{clear:function(){for(var t=m(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[h]=0},delete:function(t){var n=m(this,e),r=v(n,t);if(r){var o=r.n,u=r.p;delete n._i[r.i],r.r=!0,u&&(u.n=o),o&&(o.p=u),n._f==r&&(n._f=o),n._l==r&&(n._l=u),n[h]--}return!!r},forEach:function(t){m(this,e);for(var n,r=i(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!v(m(this,e),t)}}),d&&r(f.prototype,"size",{get:function(){return m(this,e)[h]}}),f},def:function(t,e,n){var r,o,u=v(t,e);return u?u.v=n:(t._l=u={i:o=p(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=u),r&&(r.n=u),t[h]++,"F"!==o&&(t._i[o]=u)),t},getEntry:v,setStrong:function(t,e,n){c(t,e,function(t,n){this._t=m(t,e),this._k=n,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?"keys"==e?f(0,n.k):"values"==e?f(0,n.v):f(0,[n.k,n.v]):(t._t=void 0,f(1))},n?"entries":"values",!n,!0),l(e)}}},407:function(t,e,n){"use strict";var r=n(1),o=n(9),u=n(114),i=n(16),s=n(14),a=n(116),c=n(113),f=n(115),l=n(12),d=n(30),p=n(10).f,m=n(408)(0),h=n(13);t.exports=function(t,e,n,v,g,_){var y=r[t],S=y,I=g?"set":"add",b=S&&S.prototype,M={};return h&&"function"==typeof S&&(_||b.forEach&&!i(function(){(new S).entries().next()}))?(S=e(function(e,n){f(e,S,t,"_c"),e._c=new y,void 0!=n&&c(n,g,e[I],e)}),m("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var e="add"==t||"set"==t;t in b&&(!_||"clear"!=t)&&s(S.prototype,t,function(n,r){if(f(this,S,t),!e&&_&&!l(n))return"get"==t&&void 0;var o=this._c[t](0===n?0:n,r);return e?this:o})}),_||p(S.prototype,"size",{get:function(){return this._c.size}})):(S=v.getConstructor(e,t,g,I),a(S.prototype,n),u.NEED=!0),d(S,t),M[t]=S,o(o.G+o.W+o.F,M),_||v.setStrong(S,t,g),S}},408:function(t,e,n){var r=n(23),o=n(69),u=n(31),i=n(40),s=n(409);t.exports=function(t,e){var n=1==t,a=2==t,c=3==t,f=4==t,l=6==t,d=5==t||l,p=e||s;return function(e,s,m){for(var h,v,g=u(e),_=o(g),y=r(s,m,3),S=i(_.length),I=0,b=n?p(e,S):a?p(e,0):void 0;S>I;I++)if((d||I in _)&&(h=_[I],v=y(h,I,g),t))if(n)b[I]=v;else if(v)switch(t){case 3:return!0;case 5:return h;case 6:return I;case 2:b.push(h)}else if(f)return!1;return l?-1:c||f?f:b}}},409:function(t,e,n){var r=n(410);t.exports=function(t,e){return new(r(t))(e)}},410:function(t,e,n){var r=n(12),o=n(119),u=n(2)("species");t.exports=function(t){var e;return o(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!o(e.prototype)||(e=void 0),r(e)&&null===(e=e[u])&&(e=void 0)),void 0===e?Array:e}},411:function(t,e,n){var r=n(9);r(r.P+r.R,"Set",{toJSON:n(412)("Set")})},412:function(t,e,n){var r=n(70),o=n(413);t.exports=function(t){return function(){if(r(this)!=t)throw TypeError(t+"#toJSON isn't generic");return o(this)}}},413:function(t,e,n){var r=n(113);t.exports=function(t,e){var n=[];return r(t,!1,n.push,n,e),n}},414:function(t,e,n){n(415)("Set")},415:function(t,e,n){"use strict";var r=n(9);t.exports=function(t){r(r.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},416:function(t,e,n){n(417)("Set")},417:function(t,e,n){"use strict";var r=n(9),o=n(29),u=n(23),i=n(113);t.exports=function(t){r(r.S,t,{from:function(t){var e,n,r,s,a=arguments[1];return o(this),e=void 0!==a,e&&o(a),void 0==t?new this:(n=[],e?(r=0,s=u(a,arguments[2],2),i(t,!1,function(t){n.push(s(t,r++))})):i(t,!1,n.push,n),new this(n))}})}},418:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){var t=this,e=t.$createElement;return(t._self._c||e)("Tree",{ref:"tree",attrs:{data:t.data,"show-checkbox":""},on:{"on-check-change":t.handleCheck}})},o=[];r._withStripped=!0;var u={render:r,staticRenderFns:o};e.default=u},514:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(402),o=function(t){return t&&t.__esModule?t:{default:t}}(r),u=n(65),i=n(66),s={roleName:"",menuIds:[],status:"0",roleId:"",functionIds:[]};e.default={name:"sys-role-edit",data:function(){return{loading:!1,form:s,rules:{name:{required:!0,message:"请输入角色名称",trigger:"blur"},remark:{required:!0,message:"请输入备注",trigger:"blur"}}}},methods:{getRoleDetail:function(){var t=this,e=this.$route.params.id;this.form.id!==e&&(0,u.getRoleDetail)(e).then(function(n){t.form=n.data,t.form.roleId=e,t.form.functionIds=n.data.menuIds})},submit:function(t){var e=this;this.$refs.form.validate(function(t){if(t){e.loading=!0;var n=e.form;(0,u.addOrUpdateRole)(n).then(function(t){e.loading=!1,e.$refs.form.resetFields(),e.$lf.message("修改成功","success"),(0,i.closeCurrentErrPage)(e,"sys-role")},function(){e.loading=!1})}})}},activated:function(){this.getRoleDetail()},components:{menuTreeSelector:o.default}}},867:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Card",[n("p",{attrs:{slot:"title"},slot:"title"},[t._v("编辑角色")]),t._v(" "),n("Form",{ref:"form",staticStyle:{"max-width":"800px"},attrs:{method:"post",model:t.form,"label-width":120,"label-position":"right",rules:t.rules},nativeOn:{submit:function(e){e.preventDefault(),t.submit(e)}}},[n("FormItem",{attrs:{label:"角色名称",prop:"roleName"}},[n("Input",{attrs:{placeholder:"请输入角色名称"},model:{value:t.form.roleName,callback:function(e){t.$set(t.form,"roleName",e)},expression:"form.roleName"}})],1),t._v(" "),n("FormItem",{attrs:{label:"角色Code",prop:"roleCode"}},[n("Input",{model:{value:t.form.roleCode,callback:function(e){t.$set(t.form,"roleCode",e)},expression:"form.roleCode"}})],1),t._v(" "),n("FormItem",{attrs:{label:"状态",prop:"status"}},[n("RadioGroup",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[n("Radio",{attrs:{label:0}},[t._v("启用")]),t._v(" "),n("Radio",{attrs:{label:1}},[t._v("禁用")])],1)],1),t._v(" "),n("FormItem",{attrs:{label:"权限配置",prop:"menuIds"}},[n("menu-tree-selector",{attrs:{"role-id":t.$route.params.id,"menu-ids":t.form.menuIds},on:{"update:menuIds":function(e){t.$set(t.form,"menuIds",e)}}})],1),t._v(" "),n("FormItem",[n("Button",{attrs:{type:"primary",loading:t.loading,"html-type":"submit"}},[t._v("提交")])],1)],1)],1)},o=[];r._withStripped=!0;var u={render:r,staticRenderFns:o};e.default=u}});